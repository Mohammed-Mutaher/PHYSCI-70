<!DOCTYPE html>
<html>
<title>Mohammed Mutaher - PHYSCI 70</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../mystyle.css">

<body class="w3-pale-yellow w3-content" style="max-width:1600px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:225px;" id="mySidebar"><br>
  <div class="w3-container">
    <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
      <i class="fa fa-remove"></i>
    </a>
    <img src="../Pfp.png" 
      style="object-fit:cover;
        object-position: center;
            width:62px;
            height:62px"
      class="w3-round"><br><br>
    <h4><b>Navigation</b></h4>
  </div>
  <div class="w3-bar-block">
    <a href="https://mohammed-mutaher.github.io/PHYSCI-70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-th-large fa-fw w3-margin-right"></i>Home</a> 
    <a href="../about.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-user fa-fw w3-margin-right"></i>About Me</a>
    <a href="https://nathanmelenbrink.github.io/ps70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-gears fa-fw w3-margin-right"></i>About PHYSCI 70</a>
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:250px">

<!-- Header -->
  <header id="Week 11">
    <a href="#"><img src="/w3images/avatar_g2.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>
    <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
    <div class="w3-container">
    <div class="w3-section w3-padding-10">
    <h1><b>Week 11: Computer Programming</b></h1>
    <div class="w3-section w3-bottombar w3-border-white w3-padding-10"> </div>
    </div>
  </header>

<!-- Body -->
<div class="w3-margin-left">
  <body id="Text">
    <div class="w3-container">
    <div class="w3-section w3-padding-10">

      <h5><p> 



          <p> This week, we focused on computer programming. </p>

          <p> We were tasked with sending data to a computer and writing code to display the results. I completed the assignment by following a tutorial on the PHYSCSI 70 website linked <a href="https://nathanmelenbrink.github.io/ps70/13_programming/webusb.html">here</a> and another tutorial linked on the PHYSCI website. Click <a href="https://itp.nyu.edu/physcomp/labs/labs-serial-communication/lab-serial-input-to-the-p5-js-ide/">here</a> to go to the second tutorial. Documentation and code for both tutorials is provided below. </p>

          <p> The first tutorial involves talking to a p5 sketch over Serial. The instructions were pretty straightforward. I created a new folder, and in it I created the "index.html" and "sketch.js" files by saving the code below into Notepad. </p>

          <p> Here is the code for the "index.html" file: </p>

            <pre><code>
              <!doctype html>
              <html class="no-js" lang="en">
              <head>
                  <meta charset="UTF-8">
                  <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/lib/p5.js"></script>
                  <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/p5.serialserver@0.0.28/lib/p5.serialport.js"></script>
                  <script language="javascript" type="text/javascript" src="sketch.js"></script>
                </head>
                <body>

                </body>
              </html>
            </code></pre>

            <p> Here is the code for the "script.js" file: </p>

            <pre><code class="language-js">

            let serial;                             // variable to hold an instance of the serialport library
            let portName = '/dev/cu.usbmodem1412301';  // fill in your serial port name here
            let inData;                             // for incoming serial data
            let serialDiv;                        // an HTML div to show incoming serial data

            function setup() {
              createCanvas(400, 300);
              createHTML();                       // make some HTML to place incoming data into
              serial = new p5.SerialPort();       // make a new instance of the serialport library
              serial.on('list', printList);       // set a callback function for the serialport list event
              serial.on('connected', serverConnected); // callback for connecting to the server
              serial.on('open', portOpen);        // callback for the port opening
              serial.on('data', serialEvent);     // callback for when new data arrives
              serial.on('error', serialError);    // callback for errors
              serial.on('close', portClose);      // callback for the port closing

              serial.list();                      // list the serial ports
              serial.open(portName);              // open a serial port
            }

            function draw() {
              // black background, white text:
              background(0);
              fill(255);
              // display the incoming serial data as a string:
              text("sensor value: " + inData, 30, 30);
              printData("sensor value: " + inData);
            }
            // get the list of ports:
            function printList(portList) {
              // portList is an array of serial port names
              for (var i = 0; i < portList.length; i++) {
                // Display the list the console:
                console.log(i + " " + portList[i]);
              }
            }

            function serverConnected() {
              console.log('connected to server.');
            }

            function portOpen() {
              console.log('the serial port opened.')
            }

            function serialEvent() {
              // read a byte from the serial port, convert it to a number:
              inData = Number(serial.read());
            }

            function serialError(err) {
              console.log('Something went wrong with the serial port. ' + err);
            }

            function portClose() {
              console.log('The serial port closed.');
            }

            // create some HTML elements in the sketch:
            function createHTML() {
              serialDiv = createElement('p', 'incoming data goes here');
              serialDiv.attribute('aria-label', 'incoming data');
              serialDiv.attribute('aria-role', 'alert');
              serialDiv.attribute('aria-live', 'polite');
              serialDiv.style('color', 'white');
              serialDiv.position(10, 40);
            }

            function printData(inString) {
              // put the input in the serialDiv div:
              serialDiv.html('log: ' + inString);
              // print it to the console as well
             // console.log(inString);
            }

            </code></pre>

            And here is the code I uploaded to the microcontroller:

            <pre><code class="language-arduino">

            const int sensorPin = A0;    // analog pin A0

            void setup() {
              // initialize the serial port for communication
              Serial.begin(9600);
            }

            void loop() {
              // read from potentiometer
              int sensorValue = analogRead(sensorPin);
              
              // write the value to p5.js
              Serial.write(sensorValue);
              delay(10);
            }
            </code></pre>

          <p> We were tasked with sending data to a computer and writing code to display the results. I completed the assignment by following the tutorial linked on the PHYSCI website and <a href="">here</a>. Documentation for the project is provided below.


        <p> I also downloaded and unzipped "p5.serialcontrol" from <a href="https://github.com/p5-serial/p5.serialcontrol/releases/tag/0.1.2">this website</a>. This is a separate program that allows us to create a server. With that done, we are ready to talk to a p5 sketch over Serial. </p>

        Here is the result:

        <div class="w3-center">
          <video width="400" height="300" controls>
          <source src="./1.mp4" type=video/mp4>
          </video>
        </div>

        For the second project, I followed the instructions and got the following results:

        




      </p></h5>

    </div>  
    </div>    
  </body>
</div>

<div class="w3-row-padding w3-padding-large w3-pale-yellow" style="margin-bottom:32px">

  <div class="w3-clear nextprev">
    <a class="w3-button w3-black w3-left" href="../10/index10.html"><i class="fa fa-chevron-left w3-margin-right"></i>Previous</a>
    <a class="w3-button w3-black w3-right" style="margin-right:25px" href="../12/index12.html">Next<i class="fa fa-chevron-right w3-margin-left"></i></a>
  </div>
</div>

</div>
  <div class="w3-center w3-padding w3-black" style="margin-left:225px"><p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a></p><p>Mohammed Mutaher 2022</p></div>
</div>

</html>