<!DOCTYPE html>
<html>
<title>Mohammed Mutaher - PHYSCI 70</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../mystyle.css">

<body class="w3-pale-yellow w3-content" style="max-width:1600px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:225px;" id="mySidebar"><br>
  <div class="w3-container">
    <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
      <i class="fa fa-remove"></i>
    </a>
    <img src="../Pfp.png" 
      style="object-fit:cover;
        object-position: center;
            width:62px;
            height:62px"
      class="w3-round"><br><br>
    <h4><b>Navigation</b></h4>
  </div>
  <div class="w3-bar-block">
    <a href="https://mohammed-mutaher.github.io/PHYSCI-70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-th-large fa-fw w3-margin-right"></i>Home</a> 
    <a href="../about.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-user fa-fw w3-margin-right"></i>About Me</a>
    <a href="https://nathanmelenbrink.github.io/ps70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-gears fa-fw w3-margin-right"></i>About PHYSCI 70</a>
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:250px">

<!-- Header -->
  <header id="Week 6">
    <a href="#"><img src="/w3images/avatar_g2.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>
    <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
    <div class="w3-container">
    <div class="w3-section w3-padding-10">
    <h1><b>Week 6: Electronic Input Devices</b></h1>
    <div class="w3-section w3-bottombar w3-border-white w3-padding-10"> </div>
    </div>
  </header>

<!-- Body -->
<div class="w3-margin-left">
  <body id="Text">
    <div class="w3-container">
    <div class="w3-section w3-padding-10">

      <h5><p> Work in progress! </p>

          <p> I will work on the assignment over spring break. This week has just been really difficult and I have not been feeling well. I'm not in a good headspace and I'm tired (not the kind of tired that sleep can fix, though). Sorry, and if I lose points because of this I understand. </p>




          <p> This week, we were tasked with making a capacitive sensor to measure a physical quantity, using another sensor of our choosing, and calibrating both sensors. </p>

          <p><b> Making and calibrating a capacitive sensor </b></p>

          <p> For the first part of the assignment, I made a water cup capacitor that measures water displacement depending on the number of marbles added to the cup. The goal was to be able to estimate the number of marbles added by using the trend line of the graph from the callibration step. </p>

          <p> Regarding the microcontroller and breadboard setup, I put two 1MOhm resistors between 3.3V and GND and used Robert Hart's program to measure transmit-receive signals across space between two copper foil squares. Here is the code, follwed by pictures of the microcontroller and breadboard: </p>

          <pre><code class="language-arduino">
            // rx_tx02  Robert Hart Mar 2019.
            // Program to use transmit-receive across space between two conductors
            // One conductor attached to A1, one to A3

            int read_high;
            int read_low;
            int diff;
            long int sum;
            int N_samples = 100;                        //Number of samples to take.  Larger number slows it down, but reduces scatter.

            int analog_pin = A3;
            int tx_pin = A1;

            void setup() {
            pinMode(tx_pin,OUTPUT);                     //Pin A1 provides the voltage step
            Serial.begin(115200);
            }

            void loop() {

             sum = 0;

             for (int i = 0; i < N_samples; i++){
               digitalWrite(tx_pin,HIGH);               //Step the voltage high on conductor 1.
               read_high = analogRead(analog_pin);      //Measure response of conductor 2.
               delayMicroseconds(100);                  //Delay to reach steady state.
               digitalWrite(tx_pin,LOW);                //Step the voltage to zero on conductor 1.
               read_low = analogRead(analog_pin);       //Measure response of conductor 2.
               diff = read_high - read_low;             //Desired answer is the difference between high and low.
               sum += diff;                             //Sums up N_samples of these measurements.
             }
            Serial.println(sum);
            //delay(100);
            }
          </code></pre>
     
          <div class="row">
            <div class="column2">
              <img src="./Setup1.jpg" alt="" style="width:100%">
            </div>
            <div class="column2">
            <img src="./Setup2.jpg" alt="" style="width:100%">
            </div>
          </div>

          <p> I added approximately 100mL of tap water to the cup, which was enough that the water level in the cup was the same height as the bottom of the copper foil squares. The water level in the cup rose with every marble added such that the volume of water displaced was equal to the amount of water then present between the two foil squares. I compiled the readings from the serial plotter function into a table and generated two graphs, one with a logarithmic trendline and the other with a linear trendline. </p>

          <p> An image of the cup capacitor with five marbles in it: </p>

          <p> <img src="./Cup.jpg" alt="" class="center" style="width:50%"> </p>

          <p> Here is what the serial plotter looked like every time I added a marble to the cup (in this case, the 30th marble): </p>

          <p> <img src="./29_to_30.png" alt="" class="center" style="width:50%"> </p>


          <p> And here are the table and graphs: </p>

          <style type="text/css">
            table.tableizer-table {
              font-size: 12px;
              border: 1px solid #CCC; 
              font-family: "Raleway", sans-serif;
              text-align:center;
            } 
            .tableizer-table td {
              padding: 4px;
              margin: 3px;
              column-width: 200px;
              border: 1px solid #CCC;
            }
            .tableizer-table th {
              background-color: #104E8B; 
              color: #FFF;
              font-weight: bold;
            }
          </style>

          <div class="row">
            <div class="column2">
              <table class="tableizer-table">
              <thead><tr class="tableizer-firstrow"><th>Number of marbles</th><th>Reading on Serial Plotter</th></tr></thead><tbody>
               <tr><td>0</td><td>7975</td></tr>
               <tr><td>0 + 100mL water</td><td>17280</td></tr>
               <tr><td>1</td><td>18850</td></tr>
               <tr><td>2</td><td>19120</td></tr>
               <tr><td>3</td><td>20520</td></tr>
               <tr><td>4</td><td>20720</td></tr>
               <tr><td>5</td><td>21250</td></tr>
               <tr><td>6</td><td>22260</td></tr>
               <tr><td>7</td><td>23150</td></tr>
               <tr><td>8</td><td>24420</td></tr>
               <tr><td>9</td><td>25320</td></tr>
               <tr><td>10</td><td>26520</td></tr>
               <tr><td>11</td><td>27440</td></tr>
               <tr><td>12</td><td>28320</td></tr>
               <tr><td>13</td><td>29360</td></tr>
               <tr><td>14</td><td>30120</td></tr>
               <tr><td>15</td><td>31040</td></tr>
               <tr><td>16</td><td>31900</td></tr>
               <tr><td>17</td><td>32920</td></tr>
               <tr><td>18</td><td>33500</td></tr>
               <tr><td>19</td><td>34760</td></tr>
               <tr><td>20</td><td>35720</td></tr>
               <tr><td>21</td><td>36960</td></tr>
               <tr><td>22</td><td>37960</td></tr>
               <tr><td>23</td><td>38910</td></tr>
               <tr><td>24</td><td>39800</td></tr>
               <tr><td>25</td><td>40680</td></tr>
               <tr><td>26</td><td>41600</td></tr>
               <tr><td>27</td><td>42700</td></tr>
               <tr><td>28</td><td>43410</td></tr>
               <tr><td>29</td><td>43880</td></tr>
               <tr><td>30</td><td>44800</td></tr>
              </tbody></table>
            </div>
            <div class="column2">
              <p> Graph with linear trend line: </p>
              <img src="./Lineartrend1.png" alt="" style="width:100%">
              <p> Graph with logarithmic trend line: </p>
              <img src="./Logarithmictrend1.png" alt="" style="width:100%">
            </div>
          </div>

          <p> Interestingly, the linear trendline fits the data better than the logarithmic trendline. I initially thought that the the latter would better approximate the data than the former because the cup is not perfectly cylindrical and the water level would rise less with every added marble, but this effect turned out to be largely negligible. </p>

          <p> I also experimented with taking marbles out of the cup. I wanted to see if the serial plotter values would decrease to the value I originally observed because that would demonstrate consistentcy in the reading. It would be important for estimating the number of marbles in the cup at any given time as well. I found that it took significantly longer for the serial plotter readings to stabilize when a marble was taken out (about 5-10 minutes) as compared to when a marble was added (about 1-2 minutes), and that the capacitor system was very sensistive to any perturbations in the environment, for example if I moved my laptop or sat closer to the cup. That said, when I took 5 of 30 marbles out, the capacitor re-stabilized at 41400, which was closer to the value for marble 26 (41600) than the value for marble 25 (40680). Then, when I added the five marbles back for a total of 30 marbles in the cup, the capacitor restabilized at 45420 instead of 44800 (expected value). Plugging 45420 into the linear model, we get an estimated 31.8 marbles. I imagine this discrepancy is because the cup shifted away from me a little, but nonetheless the values were approximately correct such that I could estimate the number of marbles in the cup (within 2 marbles). </p>

          <br>

          <p><b> Using and calibrating a magnetic field sensor </b></p>

          <p> For the second part of the assignment, I used and calibrated a magnetic field sensor. I had a lot of difficulty callibrating this sensor and spent hours trying to get consistent readings. I think that part of the reason it was so difficult was that I was using a magnet fragment with an irregular shape. It also took me an embarrassingly long time to figure out that the readings were affected by which side (or pole) of the magnet was facing the sensor, which in hindsight should have been obvious to me from the start. My numbers were different from the values reported in the <a href="https://roberthart56.github.io/SCFAB/SC_lab/Sensors/magnetic/index.html">example</a> linked on the website and I spent a lot of time trying to figure out why. Potential reasons I was able to think of include strength of the magnet and environmental conditions (for example, temperature). I eventually added a 1 MOhm resistor on my breadboard to stabilize the readings from serial monitor as well. </p>

          <p> Here are pictures of the magnet and the microcontroller-breadboard setup: </p>

          <div class="row">
            <div class="column2">
              <img src="./Magnet.jpg" alt="" style="width:100%"> </p>
            </div>
            <div class="column2">
              <img src="./Setup3.jpg" alt="" style="width:100%"> </p>
            </div>
          </div>

          <p> I used a slightly modified version of the <a href="https://www.arduino.cc/en/Tutorial/BuiltInExamples/AnalogReadSerial">AnalogReadSerial</a> example provided in the arduino software for the code. Two modifications I made were changing the serial communication speed from 9600 to 115200 baud and increasing the delay from 1 to 10 milliseconds (for stability). Here is the code:</p>

          <pre><code class="language-arduino">
          // the setup routine runs once when you press reset:
          void setup() {
            // initialize serial communication at 115200 bits per second:
            Serial.begin(115200);
          }

          // the loop routine runs over and over again forever:
          void loop() {
            // read the input on analog pin 0:
            int sensorValue = analogRead(A0);
            // print out the value you read:
            Serial.println(sensorValue);
            delay(10);        // delay in between reads for stability
          }
          </code></pre>

          <p> Then, to calibrate the hall sensor, I used 0.5mm spacers. I compiled the readings from the serial monitor function into a table and generated a graph based on the data. Both are shown below. </p>

          <div class="row">
            <div class="column2">
              <table class="tableizer-table">
              <thead><tr class="tableizer-firstrow"><th>Number of Spacers</th><th>Distance (mm) </th><th>Reading on Serial Monitor</th></tr></thead><tbody>
               <tr><td>0</td><td>0</td><td>41</td></tr>
               <tr><td>1</td><td>0.5</td><td>41</td></tr>
               <tr><td>2</td><td>1</td><td>41</td></tr>
               <tr><td>3</td><td>1.5</td><td>41</td></tr>
               <tr><td>4</td><td>2</td><td>41</td></tr>
               <tr><td>5</td><td>2.5</td><td>41</td></tr>
               <tr><td>6</td><td>3</td><td>41</td></tr>
               <tr><td>7</td><td>3.5</td><td>41</td></tr>
               <tr><td>8</td><td>4</td><td>41</td></tr>
               <tr><td>9</td><td>4.5</td><td>41</td></tr>
               <tr><td>10</td><td>5</td><td>42</td></tr>
               <tr><td>11</td><td>5.5</td><td>45</td></tr>
               <tr><td>12</td><td>6</td><td>53</td></tr>
               <tr><td>13</td><td>6.5</td><td>106</td></tr>
               <tr><td>14</td><td>7</td><td>143</td></tr>
               <tr><td>15</td><td>7.5</td><td>182</td></tr>
               <tr><td>16</td><td>8</td><td>193</td></tr>
               <tr><td>17</td><td>8.5</td><td>203</td></tr>
               <tr><td>18</td><td>9</td><td>219</td></tr>
               <tr><td>19</td><td>9.5</td><td>232</td></tr>
               <tr><td>20</td><td>10</td><td>240</td></tr>
               <tr><td>21</td><td>10.5</td><td>245</td></tr>
               <tr><td>22</td><td>11</td><td>256</td></tr>
               <tr><td>23</td><td>11.5</td><td>261</td></tr>
               <tr><td>24</td><td>12</td><td>266</td></tr>
               <tr><td>25</td><td>12.5</td><td>269</td></tr>
               <tr><td>26</td><td>13</td><td>276</td></tr>
               <tr><td>27</td><td>13.5</td><td>280</td></tr>
               <tr><td>28</td><td>14</td><td>286</td></tr>
               <tr><td>29</td><td>14.5</td><td>290</td></tr>
               <tr><td>30</td><td>15</td><td>292</td></tr>
              </tbody></table>
            </div>
            <div class="column2">
              <p> Graph: </p>
              <img src="./Graph2.png" alt="" style="width:100%">
              <p> Graph with logarithmic trend line: </p>
              <img src="./Logarithmictrend2.png" alt="" style="width:100%">
            </div>
          </div>

          <p> Based on the table and graph, the sensor is sensitive for distances from 5mm up to at least 15mm. Interestingly, the signal does not change from 0 to 4.5mm (it stays the same at 41). Excluding the 0 to 4.5mm range, we can generate a fairly accurate logarithmic trendline (shown in bottom-most of the two graphs directly above). One thing to note is that the baseline signal (measured without a magnet in the immediate vicinity of the hall sensor) is 344. The signal values in the graph increase with distance from the hall sensor, from 41 to 292, and will continue to increase up to 344. Had I flipped the magnet, the values would instead decrease starting from 627 (instead of 41) to 344. </p>

          <p>And that is all for this week. Thank you!</p></h5>

    </div>  
    </div>    
  </body>
</div>

<div class="w3-row-padding w3-padding-large w3-pale-yellow" style="margin-bottom:32px">

  <div class="w3-clear nextprev">
    <a class="w3-button w3-black w3-left" href="../05/index5.html"><i class="fa fa-chevron-left w3-margin-right"></i>Previous</a>
    <a class="w3-button w3-black w3-right" style="margin-right:25px" href="../07/index7.html">Next<i class="fa fa-chevron-right w3-margin-left"></i></a>
  </div>
</div>

</div>
  <div class="w3-center w3-padding w3-black" style="margin-left:225px"><p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a></p><p>Mohammed Mutaher 2022</p></div>
</div>

</html>