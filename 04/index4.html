<!DOCTYPE html>
<html>
<title>Mohammed Mutaher - PHYSCI 70</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/arduino-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/arduino.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
</style>
<body class="w3-pale-yellow w3-content" style="max-width:1600px">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:225px;" id="mySidebar"><br>
  <div class="w3-container">
    <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
      <i class="fa fa-remove"></i>
    </a>
    <img src="../Pfp.png" 
      style="object-fit:cover;
        object-position: center;
            width:62px;
            height:62px"
      class="w3-round"><br><br>
    <h4><b>Navigation</b></h4>
  </div>
  <div class="w3-bar-block">
    <a href="https://mohammed-mutaher.github.io/PHYSCI-70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-th-large fa-fw w3-margin-right"></i>Home</a> 
    <a href="../about.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-user fa-fw w3-margin-right"></i>About Me</a>
    <a href="https://nathanmelenbrink.github.io/ps70/" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-gears fa-fw w3-margin-right"></i>About PHYSCI 70</a>
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:250px">

<!-- Header -->
  <header id="Week 4">
    <a href="#"><img src="/w3images/avatar_g2.jpg" style="width:65px;" class="w3-circle w3-right w3-margin w3-hide-large w3-hover-opacity"></a>
    <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
    <div class="w3-container">
    <div class="w3-section w3-padding-10">
    <h1><b>Week 4: Microcontroller Programming</b></h1>
    <div class="w3-section w3-bottombar w3-border-white w3-padding-10"> </div>
    </div>
  </header>

<!-- Body -->
<div class="w3-margin-left">
  <body id="Text">
    <div class="w3-container">
    <div class="w3-section w3-padding-10">

      <h5><p> This week was an introduction to microcontroller programming. </p>

      <p> Before diving into my project for the week, I wanted to showcase my new and improved website that I spent an entire day (literally) working on. I completely changed the format of the website and based the look on the <a href="https://www.w3schools.com/w3css/tryit.asp?filename=tryw3css_templates_portfolio&stacked=h">"Nature Portfolio Template"</a> from W3 Schools. I modified the template a lot though and personalized it too. For comparison, here is the old website next to the new and improved one! <p>

      <p><img style="border:1px solid black;" src="./oldwebsite.png" width="50%"></p>
      <p><img style="border:1px solid black;" src="./newwebsite.png" width="50%"></p>

      <p> Now, onto the main topic. We had the option to build off the previous assignment, but my project from last week unfortunately did not work as intended despite the time and effort I put into it. So, I made some changes to the design hoping to make it work. To start off, this involved making modifications to the original sketch in Fusion 360. For example, I implemented the following changes:</p>

      <p>
        <ul style="list-style-type:disc">
            <li>Increased diameter from 2.5mm to 4mm to allow the skewers to move up and down freely</li>
            <li>Increased the distance between the center column of skewer holes and the flanking columns
              <ul> 
                <li>Bottom plate: From <i> (Edge)-20-(1st hole)-25-(2nd hole)-25-(4th hole)-20-(Edge) </i>  to  <i>(Edge)-10-(1st hole)-35-(2nd hole)-35-(4th hole)-10-(Edge)</i></li>
                <li>Top plate: From <i> (Edge)-25-(1st hole)-25-(2nd hole)-25-(4th hole)-25-(Edge) </i>  to  <i> (Edge)-15-(1st hole)-35-(2nd hole)-35-(4th hole)-15-(Edge)</i></li>
              </ul>
            <li>Made the two rows of skewer holes equidistant from the center line for both the top and bottom plates. In the previous design, one row was on the center line and the other was offset from the center line by 10mm. </li>
            <li>Increased the distance between the two rows of skewer holes from 10mm to 30mm</li>
            <li>Decreased the distance from the center of the circles attached to the dowel to the center of the hole for the dowel from 15mm to 10mm</li>
            <li>Carved out portions of the wings to make them lighter. This was to reduce the weight difference between the wings and the body of the butterfly</li>
            <li>Designed the wings so they had holes (outside of the main body of the wing) that could be used to connect them to the body of the butterfly. Previously, I had used a drill bit and made the holes manually in the body of the wing itself</li>
            <li>Designed and laser-cut a body for the butterly, complete with antennae. Previously, I had used a popsicle stick glued to the center column of skewer holes as the body</li>
              <ul>
                <li> <img src="./Sketch.png" width="50%" alt="" class="center"> </li>
              </ul>
            <li>Desined and laser-cut other miscellaneous pieces, including the housing for the motor and pieces to more efficiently and effectively translate motor movement into rotation of the dowel. Previously, I had attached the motor to the dowel using a mess of hot glue and duct tape) 
        </ul>
      </p>

      <p> Some other changes I made included the following:
          <ul style="list-style-type:disc">
            <li>Securing the dowels to significantly longer and wider popsicle sticks to avoid them getting stuck randomly on the circles attached to the dowel</li>
            <li>Attached weights to the center (body) column so that the weight of the wings would not prevent the body from falling into the lowered position</li>
            <li>Used rubber bands instead of string to attach the wings. Unlike last week, each wing was not tied separately and directly to the body of the butterfly</li>
            <li>I also made several other minor, less noticeable tweaks. For example, after one the wires attached to the motor broke last week, I obtained a new motor and soldered wires to it, being careful that they were properly attached this time before applying hot glue</li> 
          </ul>
      </p>

      <p> I'm really happy with the way the project came out. Here are some pictures of this week's project, with some close-ups!</p>

      <img src="./Candid1.jpg" width="50%" alt="" class="center">
      <img src="./Candid2.jpg" width="50%" alt="" class="center">
      <img src="./Candid3.jpg" width="50%" alt="" class="center">
      <img src="./Candid4.jpg" width="50%" alt="" class="center">
      <img src="./Candid5.jpg" width="50%" alt="" class="center">

      <p> Here are some comparison photos (with last week's project on the left, next to this week's project on the right): </p>

      <img src="./Compare1.jpg" width="50%" alt="" class="center">
      <img src="./Compare2.jpg" width="50%" alt="" class="center">

      <p> I powered the motor using the adafruit microcontroller connected to an L9110 H Bridge Power Driver to drive it. The code I had uploaded on the microcontroller was from class on Thursday, so the motor ran for 4 seconds and turned off for 2 seconds (rinse and repeat). </p>

      <p> Here is a short video of the motor turning on and off following this pattern:</p>

      <video width="320" height="240" controls>
      <source src="./Stopandgo.mp4" type=video/mp4>
      </video>

      <p> And here is the code, taken from the <a href = "https://nathanmelenbrink.github.io/ps70/04_arduino/L9110.html<class website">class website</a>:</p>

      <pre><code class="language-arduino">
      const int A1A = 3;  // define pin 3 for A-1A (speed)
      const int A1B = 4;  // define pin 4 for A-1B (direction)

      void setup() {
        pinMode(A1A, OUTPUT);     // specify these pins as outputs
        pinMode(A1B, OUTPUT);
        digitalWrite(A1A, LOW);   // start with the motors off 
        digitalWrite(A1B, LOW);
      }

      void loop() {
        // start the motor 
        digitalWrite(A1A, HIGH);   
        digitalWrite(A1B, LOW);
        delay(4000);              // allow the motor to run for 4 seconds

        // stop the motor
        digitalWrite(A1A, LOW);   // setting both pins LOW stops the motor
        digitalWrite(A1B, LOW);
        delay(2000);              // keep the motor off for 2 seconds

        // start the motor in opposite direction
        digitalWrite(A1A, LOW);  // A1A needs to be LOW to switch direction
        digitalWrite(A1B, HIGH);  
        delay(4000);              // allow the motor to run for 4 seconds

        // stop the motor
        digitalWrite(A1A, LOW);   // setting both pins LOW stops the motor
        digitalWrite(A1B, LOW);
        delay(2000);   

      }
      </code></pre>

      <p> As a side note, this was my first time using the motor to run the kinetic sculpture! I was happy and relieved at the same time that it worked as intended. </p>

      <p> I wanted to slow down and speed up the flapping of the wings to see which looked more natural, so I chose to create a circuit with a potentiometer. I followed the instructions on the <a href = "https://nathanmelenbrink.github.io/ps70/04_arduino/L9110.html<class website">class website</a> and uploaded the code that was posted there to the microcontroller. One thing to note is that the potentiometer did not fit into the A0, A2, and A4 pins on the microcontroller, so I improvised and used a breadboard to complete the circuit. Also, I used my computer to power the circuit so I used 5V instead of 9V.</p>

      <p> This is what the finished circuit looked like: </p>

      <img src="./Circuit1.jpg" width="50%" alt="" class="center">
      <img src="./Circuit2.jpg" width="50%" alt="" class="center">

      <p> Here is the code:</p>

      <pre><code class="language-arduino">
      /*  Code to run motor in one direction based on potentiometer reading.
       *  Motor driver speed control on pin 3 (direction LOW by default)
       *  Potentiometer plugged into A0, A2, and A4 on Metro M0 (or similar).
       */

      void setup() {
        pinMode(3, OUTPUT);
        pinMode(A0, OUTPUT);  //This will be GND for the potentiometer
        pinMode(A4, OUTPUT);  //This will be 3.3V for the pot

        digitalWrite(A0, LOW);
        digitalWrite(A4, HIGH);
      }

      void loop() {
        int pot_value = analogRead(A2);   //pot wiper is on A2
        int motor_speed = map(pot_value, 0, 1023, 255, 0); // map motor_level to pot_value so that zero corresponds to lowest speed
        analogWrite(3, motor_speed);
        delay(1);
      }
      </code></pre>

      <p> With the circuit now complete and the code uploaded onto the microcontroller, I turned the dial of the potentiometer from the off position to the full speed position. Apologies for the noise in the background, but here is a video of me playing around with the potentiometer:</p>

      <video width="320" height="240" controls>
      <source src="./Butterfly_potentiometer.mp4" type=video/mp4>
      </video>

      <p>That is all for this week. Thank you!</p></h5> 

    </div>  
    </div>    
  </body>
</div>


<div class="w3-row-padding w3-padding-large w3-pale-yellow" style="margin-bottom:32px">

  <div class="w3-clear nextprev">
    <a class="w3-button w3-black w3-left" href="../03/index3.html"><i class="fa fa-chevron-left w3-margin-right"></i>Previous</a>
    <a class="w3-button w3-black w3-right" style="margin-right:25px" href="../05/index5.html">Next<i class="fa fa-chevron-right w3-margin-left"></i></a>
  </div>
</div>

</div>
  <div class="w3-center w3-padding w3-black" style="margin-left:225px"><p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a></p><p>Mohammed Mutaher 2022</p></div>
</div>

</html>